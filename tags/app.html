<app>
    <header>
        <div layout layout-align="start start">
            <img width="175" src="img/flexmaid.png" alt="" />
            <div>
                <h1>Flex Maid</h1>
                <span>
                    At your service
                </span>
            </div>
        </div>
    </header>
    <input name="label" type="text">
    <input type="submit" onclick={add} name="name" value="subimt">
    <section class="breakpoints">
        <breakpoint
        each={breakpoint, index in breakpoints}
        layout="row" layout-align="space-between"
        style="background-color: hsl(330, 50%, {25+(50/breakpoints.length)*index}%)"
        label="{breakpoint.label}"
        pixel="{breakpoint.pixel}">

        </breakpoint>
    </section>
    <script>
        this.breakpoints = [
            {
                label: 'sm',
                pixel: 500
            },
            {
                label: 'md',
                pixel: 920
            },
            {
                label: 'lg',
                pixel: 1200
            },
        ]

        add(e) {
            var equallyLabeledItems = this.breakpoints.filter((item) => {
                return item.label === this.label.value
            })
            var pixel = Math.random() * 1900 | 0
            if (!equallyLabeledItems.length && this.label.value.length) {
                var breakpointPushIndex = 0
                this.breakpoints.filter((item, index) => {
                    if (pixel >= item.pixel) {
                        breakpointPushIndex = index + 1
                    }
                })
                console.log(breakpointPushIndex + ' - ' + pixel);
                this.breakpoints.splice(breakpointPushIndex, 0, {
                    label: this.label.value,
                    pixel: pixel
                })
            }
        }


        this.on('remove', (breakpoint) => {
            this.breakpoints = this.breakpoints.filter((bp) => {
                return breakpoint.opts.label != bp.label
            })
        })
    </script>
</app>
